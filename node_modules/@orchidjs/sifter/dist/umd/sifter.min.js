!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).sifter=t()}(this,(function(){"use strict"
var e=[[67,67],[160,160],[192,438],[452,652],[961,961],[1019,1019],[1083,1083],[1281,1289],[1984,1984],[5095,5095],[7429,7441],[7545,7549],[7680,7935],[8580,8580],[9398,9449],[11360,11391],[42792,42793],[42802,42851],[42873,42897],[42912,42922],[64256,64260],[65313,65338],[65345,65370]]
const t=e=>e.normalize("NFD").replace(/[\u0300-\u036F]/g,"").normalize("NFKD").toLowerCase()
var r=null
const n=t=>{null===r&&(r=(()=>{var t={"l·":"l","ʼn":"n","æ":"ae","ø":"o","aʾ":"a","dž":"dz"},r={}
return e.forEach((e=>{for(let n=e[0];n<=e[1];n++){let e=String.fromCharCode(n),i=e.normalize("NFD").replace(/[\u0300-\u036F]/g,"").normalize("NFKD")
i!=e&&(i=i.toLowerCase(),i in t&&(i=t[i]),i in r||(r[i]=i+i.toUpperCase()),r[i]+=e)}})),r})())
for(let e in r)r.hasOwnProperty(e)&&(t=t.replace(new RegExp(e,"g"),"["+r[e]+"]"))
return t},i=(e,t)=>{if(e)return e[t]},o=(e,t)=>{if(e){for(var r,n=t.split(".");(r=n.shift())&&(e=e[r]););return e}},s=(e,t,r)=>{var n,i
return e?-1===(i=(e+="").search(t.regex))?0:(n=t.string.length/e.length,0===i&&(n+=.5),n*r):0},c=e=>(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),u=(e,t)=>{var r=e[t]
r&&!Array.isArray(r)&&(e[t]=[r])},f=(e,t)=>{if(Array.isArray(e))e.forEach(t)
else for(var r in e)e.hasOwnProperty(r)&&t(e[r],r)},l=(e,r)=>"number"==typeof e&&"number"==typeof r?e>r?1:e<r?-1:0:(e=t(e+"").toLowerCase())>(r=t(r+"").toLowerCase())?1:r>e?-1:0

;/**
	 * sifter.js
	 * Copyright (c) 2013–2020 Brian Reavis & contributors
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this
	 * file except in compliance with the License. You may obtain a copy of the License at:
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software distributed under
	 * the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF
	 * ANY KIND, either express or implied. See the License for the specific language
	 * governing permissions and limitations under the License.
	 *
	 * @author Brian Reavis <brian@thirdroute.com>
	 */
return class{constructor(e,t){this.items=void 0,this.settings=void 0,this.items=e,this.settings=t||{diacritics:!0}}tokenize(e,t,r){if(!e||!e.length)return[]
const i=[],o=e.split(/\s+/)
var s
return r&&(s=new RegExp("^("+Object.keys(r).map(c).join("|")+"):(.*)$")),o.forEach((e=>{let r,o=null,u=null
s&&(r=e.match(s))&&(o=r[1],e=r[2]),e.length>0&&(u=c(e),this.settings.diacritics&&(u=n(u)),t&&(u="\\b"+u)),i.push({string:e,regex:u?new RegExp(u,"i"):null,field:o})})),i}getScoreFunction(e,t){var r=this.prepareSearch(e,t)
return this._getScoreFunction(r)}_getScoreFunction(e){const t=e.tokens,r=t.length
if(!r)return function(){return 0}
const n=e.options.fields,i=e.weights,o=n.length,c=e.getAttrFn
if(!o)return function(){return 1}
const u=1===o?function(e,t){const r=n[0].field
return s(c(t,r),e,i[r])}:function(e,t){var r=0
if(e.field){const n=c(t,e.field)
!e.regex&&n?r+=1/o:r+=s(n,e,1)}else f(i,((n,i)=>{r+=s(c(t,i),e,n)}))
return r/o}
return 1===r?function(e){return u(t[0],e)}:"and"===e.options.conjunction?function(e){for(var n,i=0,o=0;i<r;i++){if((n=u(t[i],e))<=0)return 0
o+=n}return o/r}:function(e){var n=0
return f(t,(t=>{n+=u(t,e)})),n/r}}getSortFunction(e,t){var r=this.prepareSearch(e,t)
return this._getSortFunction(r)}_getSortFunction(e){var t,r,n
const i=this,o=e.options,s=!e.query&&o.sort_empty?o.sort_empty:o.sort,c=[],u=[],f=function(t,r){return"$score"===t?r.score:e.getAttrFn(i.items[r.id],t)}
if(s)for(t=0,r=s.length;t<r;t++)(e.query||"$score"!==s[t].field)&&c.push(s[t])
if(e.query){for(n=!0,t=0,r=c.length;t<r;t++)if("$score"===c[t].field){n=!1
break}n&&c.unshift({field:"$score",direction:"desc"})}else for(t=0,r=c.length;t<r;t++)if("$score"===c[t].field){c.splice(t,1)
break}for(t=0,r=c.length;t<r;t++)u.push("desc"===c[t].direction?-1:1)
const a=c.length
if(a){if(1===a){const e=c[0].field,t=u[0]
return function(r,n){return t*l(f(e,r),f(e,n))}}return function(e,t){var r,n,i
for(r=0;r<a;r++)if(i=c[r].field,n=u[r]*l(f(i,e),f(i,t)))return n
return 0}}return null}prepareSearch(e,r){const n={}
var s=Object.assign({},r)
if(u(s,"sort"),u(s,"sort_empty"),s.fields){u(s,"fields")
const e=[]
s.fields.forEach((t=>{"string"==typeof t&&(t={field:t,weight:1}),e.push(t),n[t.field]="weight"in t?t.weight:1})),s.fields=e}return{options:s,query:e=t(e+"").toLowerCase().trim(),tokens:this.tokenize(e,s.respect_word_boundaries,n),total:0,items:[],weights:n,getAttrFn:s.nesting?o:i}}search(e,t){var r,n,i=this
n=this.prepareSearch(e,t),t=n.options,e=n.query
const o=t.score||i._getScoreFunction(n)
e.length?f(i.items,((e,i)=>{r=o(e),(!1===t.filter||r>0)&&n.items.push({score:r,id:i})})):f(i.items,((e,t)=>{n.items.push({score:1,id:t})}))
const s=i._getSortFunction(n)
return s&&n.items.sort(s),n.total=n.items.length,"number"==typeof t.limit&&(n.items=n.items.slice(0,t.limit)),n}}}))
//# sourceMappingURL=sifter.min.js.map
